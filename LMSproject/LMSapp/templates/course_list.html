<!-- course_list.html -->
<!DOCTYPE html>
{% load static %}
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="icon"
      href="{% static 'LMSfavicon.jpeg' %}"
      type="image/x-icon"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css"
    />
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" href="{% static 'styles.css' %}" />
    <title>Course List</title>
  </head>
  <body>
    <!-- Navigation Bar -->
    <nav class="navbar navbar-expand-sm bg-primary navbar-dark px-3">
      <!-- Logo -->
      <a class="navbar-brand" href="#">
        <img src="{% static 'logo1.jpeg' %}" alt="Logo" width="100" />
      </a>

      <!-- Links -->
      <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
        <ul class="navbar-nav">
          <li class="nav-item active">
            <a class="nav-link" href="{% url 'home'%}"><h3>About us</h3></a>
          </li>
          {% if user.is_authenticated %}
      <!-- If user is authenticated -->
      {% if user.is_superuser %}
          <li class="nav-item">
            <a class="nav-link" href="{% url 'create_course' %}"
              ><h3>Create</h3></a>
          </li>
          {% endif %}
          <li class="nav-item">
            <a class="nav-link" href="#"><h3>Search</h3></a>
          </li>
          
          <!-- If user is authenticated, show logout link -->
          <li class="nav-item">
            <a class="nav-link" href="{% url 'logout' %}"><h3>Logout</h3></a>
          </li>
          {% else %}
          <!-- If user is not authenticated, show login link -->
          <li class="nav-item">
            <a class="nav-link" href="{% url 'login' %}"><h3>Login</h3></a>
          </li>
          {% endif %}
        </ul>
      </div>
    </nav>

    <br /><br />
    <div class="container-fluid">
    {% if user.is_authenticated %}
    <!-- If user is authenticated, display course list -->
    <h2>Hi {{ user.username }}! Find the list of courses we offer.</h2>
    <br /><br />
    <h2>Course List</h2>
    <br />
    <ul>
      {% if courses %} {% for course in courses %}
      <li>
        <a href="{% url 'course_detail' course.title%}">{{ course.title}}</a>

        {% if user.is_superuser %}
        <a href="{% url 'delete_course' course.title %}">Delete</a>
        {% endif %}
      </li>
      {% endfor %} {% else %}
      <li>No courses available</li>
      {% endif %}
    </ul>
    {% else %}
    <!-- If user is not authenticated, show prompt to sign in -->
    <h2>Please log in to view the course list.</h2>
    {% endif %}

</div>

<!-- Footer -->
<footer class="footer">
    <p>&copy; 2024 LMS. All rights reserved.</p>
  </footer>
  </body>
</html>
